<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>São Paulo Mania</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/slider.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <header id="header">
            <img src="assets/imgs/Brasao_do_Sao_Paulo_Futebol_Clube.svg.png" class="logo">
            <h2>SÃO PAULO MANIA</h2>
            <nav>
                <ul>
                    <li><a href="cadastro.html">Entrar / Registrar-se</a></li>
                </ul>
            </nav>
        </header>
        <div class="principal">
            <section class="intro">
                <div class="frase_principal">
                    <h1>"DENTRE OS GRANDES, ÉS O PRIMEIRO!"</h1>
                </div>
            </section>
        </div>
        <section class="sobre">
            <h1>Sobre Nós</h1>
            <div class="texto_sobre">
                <img src="assets/imgs/Brasao_do_Sao_Paulo_Futebol_Clube.svg.png" class="logo">
                <p class="frase_impacto">O São Paulo Mania foi criado para unir todos os apaixonados pelo maior clube do
                    Brasil. <br> Se você é um fanático, seu lugar é aqui. Seja muito bem-vindo!</p>
                <br>
                <p class="text">Aqui temos curiosidades, notícias e muito mais sobre o São Paulo Futebol Clube. <br>Além
                    de ser um portal do clube, possuímos também interação para os usuários, onde vocês poderão jogar um Super Quiz sobre a história do clube para testar seus
                    conhecimentos sobre o seu time do coração. &#10084 <br>
                    Crie sua conta e se junte à nossa comunidade, venha fazer parte da família!</p>
            </div>
        </section>
        <section class="logSection">
            <div class="curiosidades">
                <h1 class="tituloCuriosidades">Você Sabia?</h1>
                <div class="slider">
                    <div class="slides">
                        <input type="radio" name="radioBtn" id="radio1" onclick="stopAutoSlider()">
                        <input type="radio" name="radioBtn" id="radio2" onclick="stopAutoSlider()">
                        <input type="radio" name="radioBtn" id="radio3" onclick="stopAutoSlider()">
                        <div class="first slide">
                            <div class="first text">
                                <h1>O jogador mais caro da história:</h1>
                                <p> 
                                    Quem lidera a lista de jogador mais caro da história do clube é ninguém mais, ninguém menos que o atacante Pablo, atual Athletico-PR. <br> Em 2018, o tricolor desembolsou 6 milhões de Euros (cerca de R$24 milhões na época) pelo jogador, que em 2021 deixou o clube para voltar ao Athletico.
                                </p>
                            </div>
                        </div>
                        <div class="second slide">
                            <div class="second text">
                                <h1>As cores do Clube:</h1>
                                <p> 
                                    A definição das cores vermelha, branca e preta para representar o São Paulo, foi realizada justamente na data de criação do clube, após uma reunião entre os ex-membros do CA Paulistano (Club Athlético Paulistano) e do AA das Palmeiras (Associação Athlética das Palmeiras), dois times de São Paulo, que resolveram se unir e criar o São Paulo Futebol Clube.
                                </p>
                            </div>
                        </div>
                        <div class="third slide">
                            <div class="third text">
                                <h1>Goleiro artilheiro:</h1>
                                <p> 
                                    O <B>M1TO</B> detém a marca de goleiro com mais gols da história do Futebol. Reconhecido por sua grande especialidade em cobranças de pênaltis e faltas, o goleiro fez vários clubes de vítimas ao longo de sua carreira, mas, suas maiores vítimas são o Cruzeiro (MG) e o Palmeiras (SP), ambos os time sofreram impiedosos 7 gols do goleiro.
                                </p>
                            </div>
                        </div>
                        <div class="autoNavigation">
                            <div class="autoBtn1"></div>
                            <div class="autoBtn2"></div>
                            <div class="autoBtn3"></div>
                        </div>
                    </div>
                    <div class="manualNavigation">
                        <label for="radio1" class="manualBtn"></label>
                        <label for="radio2" class="manualBtn"></label>
                        <label for="radio3" class="manualBtn"></label>
                    </div>
                </div>
            </div>
            <div class="quiz">
                <div class="quiz_box question1" id="question1">
                    <h2>O são paulo é o maior time do mundo?</h2>
                    <p onclick="nextQuestion1to2(), computarAcerto()">sim</p>
                    <p onclick="nextQuestion1to2(), computarErro()">não</p>
                    <p onclick="nextQuestion1to2(), computarErro()">obvio que não</p>
                    <p onclick="nextQuestion1to2(), computarErro()">o maior é o palmeiras</p>
                </div>
                <div class="quiz_box question2" id="question2">
                    <h2>Pergunta</h2>
                    <p onclick="nextQuestion2to3(), computarAcerto()">2R1</p>
                    <p onclick="nextQuestion2to3(), computarErro()">2R2</p>
                    <p onclick="nextQuestion2to3(), computarErro()">2R3</p>
                    <p onclick="nextQuestion2to3(), computarErro()">2R4</p>
                </div>
                <div class="quiz_box question3" id="question3">
                    <h2>Pergunta</h2>
                    <p onclick="nextQuestion3to4(), computarAcerto()">3R1</p>
                    <p onclick="nextQuestion3to4(), computarErro()">3R2</p>
                    <p onclick="nextQuestion3to4(), computarErro()">3R3</p>
                    <p onclick="nextQuestion3to4(), computarErro()">3R4</p>
                </div>
                <div class="quiz_box question4" id="question4">
                    <h2>Pergunta</h2>
                    <p onclick="nextQuestion4to5(), computarAcerto()">4R1</p>
                    <p onclick="nextQuestion4to5(), computarErro()">4R2</p>
                    <p onclick="nextQuestion4to5(), computarErro()">4R3</p>
                    <p onclick="nextQuestion4to5(), computarErro()">4R4</p>
                </div>
                <div class="quiz_box question5" id="question5">
                    <h2>Pergunta</h2>
                    <p onclick="computarAcerto(), inserirTentativa(), listar(), nextQuestion5toResult()">5R1</p>
                    <p onclick="computarErro(), inserirTentativa(), listar(), nextQuestion5toResult()">5R2</p>
                    <p onclick="computarErro(), inserirTentativa(), listar(), nextQuestion5toResult()">5R3</p>
                    <p onclick="computarErro(), inserirTentativa(), listar(), nextQuestion5toResult()">5R4</p>
                </div>
                <div class="quiz_box result" id="result">
                    <h2>Parabéns!</h2>
                    <span id="tentativasQuiz">Tentativa:</span>
                    <span id="respostaCerta">Respostas Certas: </span>
                    <span id="respostaErrada">Respostas Erradas: </span>
                </div>
            </div>
            <section class="noticias">
                <article class="noticia-1">
                    <div class="img-noticia-1"></div>
                    <div class="texto-noticia-1">
                        <h1>Lorem Ipsum</h1>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Non ullam, cumque adipisci modi libero.</p>
                    </div>
                </article>
                <div class="noticias-horizontais">
                    <article class="noticia-2">
                        <div class="img-noticia-2"></div>
                        <span>
                            <h2>Lorem Ipsum</h2>
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Non ullam, cumque adipisci modi libero.</p>
                        </span>
                    </article>
                    <article/article class="noticia-3">
                        <div class="img-noticia-3"></div>
                        <span>
                            <h2>Lorem Ipsum</h2>
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Non ullam, cumque adipisci modi libero.</p>
                        </span>
                    </article>
                </div>
            </section>
        </section>

    </div>
    <footer>

    </footer>
</body>

</html>

<script>
    if (sessionStorage.NOME_USUARIO != undefined) {
        console.log('logado!')
    }
    
    var sliderCount = 1;
    document.getElementById('radio1').checked = true;

    var sliderInterval = setInterval(function () {
        nextImageOfTheSlider()
    }, 2000);

    function nextImageOfTheSlider() {
        sliderCount++;
        if (sliderCount > 3) {
            sliderCount = 1;
        }

        document.getElementById('radio' + sliderCount).checked = true;
    }

    function stopAutoSlider() {
        clearInterval(sliderInterval)
    }

    var contadorAcerto = 0;
    function computarAcerto() {
        contadorAcerto++
    }

    var contadorErro = 0;
    function computarErro() {
        contadorErro++
    }

    function nextQuestion1to2() {
        question1.style.display = 'none';
        question2.style.display = 'flex';
    }
    function nextQuestion2to3() {
        question2.style.display = 'none';
        question3.style.display = 'flex';
    }
    function nextQuestion3to4() {
        question3.style.display = 'none';
        question4.style.display = 'flex';
    }
    function nextQuestion4to5() {
        question4.style.display = 'none';
        question5.style.display = 'flex';
    }
    function nextQuestion5toResult() {
        question5.style.display = 'none';
        result.style.display = 'flex';
        respostaCerta.innerHTML += `${contadorAcerto}`
        respostaErrada.innerHTML += `${contadorErro}`
    }

    function inserirTentativa() {
        var idUsuario = sessionStorage.ID_USUARIO;
        var qtdCertas = contadorAcerto;
        var qtdErradas = contadorErro;

        fetch(`/quiz/inserirTentativa/${idUsuario}`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                qtdCertas,
                qtdErradas
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    console.log("Tentativa inserida com sucesso");
                } else {
                    alert("Houve um erro ao tentar inserir a  tentativa!");
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

        return false;
    }

    function listar() {
        var idUsuario = sessionStorage.ID_USUARIO;

        fetch(`/quiz/listarTentativa/${idUsuario}`).then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));
                    var tentativa = resposta[0].Tentativas;
                    tentativasQuiz.innerHTML += tentativa;
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
        });
    }

</script>